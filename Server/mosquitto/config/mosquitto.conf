# Mosquitto Configuration for MouseTrap IoT System (Docker)
# Uses Dynamic Security plugin for real-time credential management

# Listen on default MQTT port
listener 1883

# Disable anonymous connections - require authentication
allow_anonymous false

# Dynamic Security plugin - real-time credential management
# This replaces the password_file approach and allows instant credential updates
plugin /usr/lib/mosquitto_dynamic_security.so
plugin_opt_config_file /mosquitto/config/dynamic-security.json

# Logging
log_dest stdout
log_type all
connection_messages true
log_timestamp true

# Persistence
persistence true
persistence_location /mosquitto/data/
persistence_file mosquitto.db
